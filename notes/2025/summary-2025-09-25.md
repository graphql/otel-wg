# Meeting Summary for OTel WG

**NOTICE**: This summary was auto-generated by Zoom's "AI". AI-generated
content may be inaccurate or misleading. Always check for accuracy. If in
doubt, please consult the meeting recording at
https://youtube.com/@GraphQLFoundation/playlists

- Meeting start: 2025-09-25T17:03:03Z
- Meeting end: 2025-09-25T18:05:26Z
- Summary start: 2025-09-25T17:03:52Z
- Summary end: 2025-09-25T18:03:03Z

The team discussed error handling approaches for graphical operations and spans, including the use of semantic conventions and OpenTelemetry for recording exceptions and events. They explored the trade-offs between using GraphQL for data synchronization versus simpler methods, while also discussing the challenges of cursor-based pagination and performance monitoring. The group addressed the handling of errors in distributed tracing systems, focusing on how to record and categorize errors on root spans while maintaining scalability and useful UI feedback.

## Next Steps

- Pascal to push a new pull request with error definitions for GraphQL in OpenTelemetry.
- Team to decide on the error type attribute for GraphQL errors .
- Team to propose using span events for reporting GraphQL errors with attributes like error.message, error.location, error.path, and optional error.extensions.code.
- Team to discuss subscription and deferred queries for traces in a future meeting after completing the error specifications.

## Summary

### Error Handling and Observability Discussion

Pascal and Rob discussed the need to consult with Trask regarding the direction for error handling, as they have two options: using semantic conventions for errors or developing their own conventions for graphical errors involving complex objects. Pascal inquired about Rob's current use of aggregations and metrics, noting that Rob's team uses Prometheus for self-hosted observability, which avoids issues with pricing and data processing. They also discussed the scale of Rob's team and company, highlighting the cost-effectiveness of self-hosting Prometheus compared to using services like Datadog.

### GraphQL Challenges in API Management

Rob and Pascal discussed the challenges and considerations of using GraphQL for data synchronization and public API management. They explored the overlap between performance monitoring in observability tools and GraphQL usage, noting that Shopify's public API serves both merchants and developers. Pascal raised concerns about the overhead of using GraphQL for data synchronization, suggesting that simpler methods like JSON streaming might be more efficient. They also touched on the trend of making internal APIs public and the unique use cases of Shopify's API, including data synchronization and app ecosystem development.

### Data Fetching and Error Handling

The group discussed challenges with data fetching and cursor-based pagination, noting that it's harder to jump to arbitrary points in time compared to previous offset pagination methods. Pascal and Rob reviewed semantic conventions for errors, particularly focusing on how to record exceptions and events in OpenTelemetry. They discussed the transition from using span events to log records, and the need to map GraphQL errors into events that would work across all backends, though this approach lacks stack traces and types compared to exceptions.

### Error Handling in Spans Discussion

Pascal, Rob, and Valentin discussed error handling in spans and its implications for UI feedback. They debated whether spans should be flagged as errors for all top-level errors or only for significant issues. Pascal suggested appending errors as events on spans while keeping spans as successful, but Rob argued that this could mask problems. They agreed that authentication and authorization errors should always flag spans as errors, but were less certain about validation and other types of errors. The group acknowledged the need to balance providing useful error information without overwhelming the UI with red indicators.

### Distributed Tracing Exception Handling

Pascal and Rob discussed the handling of exceptions and errors in a distributed tracing system. They agreed that exceptions should be aggregated and handled separately from regular errors, with a focus on stack trace hashing to group similar exceptions. Rob suggested the need for a way to link spans with error information in a reporting system, while Pascal explained that unhandled exceptions would automatically be recorded in spans. They discussed the possibility of using custom specifications for GraphQL errors and agreed that errors and exceptions could coexist for the same issue, with errors being visible to users and exceptions representing unhandled issues.

### GraphQL Error Reporting with OpenTelemetry

The team discussed how to handle error reporting in GraphQL operations using OpenTelemetry. They agreed to record errors on the root span for simplicity and scalability, rather than trying to correlate them with specific resolver spans. They decided to use the error extension code as a recommended way to categorize errors. Pascal and Rob discussed the trade-offs between recording detailed error information versus keeping traces simple and scalable. The team also considered the needs of dashboard developers who prefer to see most information on the root span. They plan to propose these ideas to the OTEL team for feedback.

### Graphical Operations Error Handling Discussion

Pascal and Rob discussed the handling of errors in graphical operations and spans. They agreed that errors should be marked as such in spans, even if they are partial successes, as this helps identify issues. Rob expressed concern about exceptions being treated as errors, but Pascal clarified that the status of spans, not attributes, determines if a span is marked as an error. They decided to use span events to report errors, with attributes like arrow.message.error, error.location, and error.path, and proposed making error.extensions.code optional.

### API Tracing and Error Handling

The team discussed API tracing and error handling, with Pascal noting that timestamp precision might not be crucial. They agreed to focus on completing error definitions in the next few meetings before addressing metrics, while Valentin raised questions about handling subscriptions and long-lived spans. Pascal mentioned a previous discussion with Quay about deferred elements and proposed creating separate spans to track deferred operations, though he expressed uncertainty about the optimal approach for subscription tracing.
